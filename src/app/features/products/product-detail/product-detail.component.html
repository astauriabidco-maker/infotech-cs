<app-header></app-header>

<main class="product-detail-page">
  @if (isLoading()) {
    <div class="container">
      <div class="loading-state">
        <div class="spinner"></div>
        <p>Chargement du produit...</p>
      </div>
    </div>
  } @else if (product()) {
    <div class="container">
      <!-- Breadcrumb Navigation -->
      <nav class="breadcrumb" aria-label="Fil d'Ariane">
        <a routerLink="/" class="breadcrumb-item">
          <svg class="breadcrumb-icon" viewBox="0 0 24 24" fill="none">
            <path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z" stroke="currentColor" stroke-width="2"/>
            <polyline points="9 22 9 12 15 12 15 22" stroke="currentColor" stroke-width="2"/>
          </svg>
          Accueil
        </a>
        <svg class="breadcrumb-separator" viewBox="0 0 24 24" fill="none">
          <polyline points="9 18 15 12 9 6" stroke="currentColor" stroke-width="2"/>
        </svg>
        <a routerLink="/products" class="breadcrumb-item">Produits</a>
        <svg class="breadcrumb-separator" viewBox="0 0 24 24" fill="none">
          <polyline points="9 18 15 12 9 6" stroke="currentColor" stroke-width="2"/>
        </svg>
        <span class="breadcrumb-item active">{{ product()?.title }}</span>
      </nav>

      <div class="product-detail">
        <!-- Images Gallery -->
        <div class="gallery">
          <div class="main-image">
            <img [src]="getMainImage()" [alt]="product()?.title">
          </div>
          @if (product()?.images && product()!.images.length > 1) {
            <div class="thumbnails">
              @for (image of product()!.images; track $index) {
                <button 
                  class="thumbnail"
                  [class.active]="selectedImage() === $index"
                  (click)="selectImage($index)">
                  <img [src]="getThumbnailImage($index)" [alt]="product()?.title">
                </button>
              }
            </div>
          }
        </div>

        <!-- Product Info -->
        <div class="product-info">
          <div class="product-header">
            <span class="product-brand">{{ product()?.brand }}</span>
            <div class="badge" [class.badge-success]="product()?.condition === 'new'">
              {{ product()?.condition }}
            </div>
          </div>

          <h1 class="product-title">{{ product()?.title }}</h1>

          @if (product()?.categoryName) {
            <p class="product-category">
              <svg viewBox="0 0 24 24" fill="none">
                <path d="M4 4h7v7H4V4zm9 0h7v7h-7V4zm-9 9h7v7H4v-7zm9 0h7v7h-7v-7z" stroke="currentColor" stroke-width="2"/>
              </svg>
              {{ product()?.categoryName }}
            </p>
          }

          <!-- Section Offre Recommand√©e (Style Back Market) -->
          @if (recommendedListing()) {
            <div class="recommended-offer-section">
              <div class="best-offer-badge">
                <svg viewBox="0 0 24 24" fill="none">
                  <path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z" fill="currentColor"/>
                </svg>
                Meilleure offre
              </div>

              <div class="recommended-listing">
                <div class="listing-main-info">
                  <div class="price-block">
                    <div class="current-price">{{ recommendedListing()!.price | number:'1.2-2' }} ‚Ç¨</div>
                    <div class="seller-info">
                      <span>Vendu par</span>
                      <strong>{{ recommendedListing()!.sellerShopName }}</strong>
                    </div>
                  </div>

                  <div class="condition-block">
                    <span class="condition-badge" [style.background-color]="getConditionColor(recommendedListing()!.conditionNote)">
                      {{ getConditionLabel(recommendedListing()!.conditionNote) }}
                    </span>
                    @if (recommendedListing()!.quantity <= 5) {
                      <span class="stock-warning">Plus que {{ recommendedListing()!.quantity }} en stock</span>
                    } @else {
                      <span class="stock-ok">En stock</span>
                    }
                  </div>
                </div>

                @if (recommendedListing()!.conditionNote) {
                  <p class="condition-description">{{ recommendedListing()!.conditionNote }}</p>
                }
              </div>

              @if (listings().length > 1) {
                <button class="view-all-offers-btn" (click)="openAllOffersModal()">
                  <span>Voir toutes les offres ({{ listings().length }})</span>
                  <svg viewBox="0 0 24 24" fill="none">
                    <path d="M9 18l6-6-6-6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                  </svg>
                </button>
              }
            </div>
          } @else {
            <div class="no-listings">
              <p>Aucune offre disponible pour le moment</p>
            </div>
          }

          <!-- Quantity Selector -->
          @if (selectedListing()) {
            <div class="quantity-selector">
              <label class="quantity-label">Quantit√©</label>
              <div class="quantity-controls">
                <button 
                  class="quantity-btn" 
                  (click)="decrementQuantity()"
                  [disabled]="quantity() <= 1">
                  <svg viewBox="0 0 24 24" fill="none">
                    <line x1="5" y1="12" x2="19" y2="12" stroke="currentColor" stroke-width="2"/>
                  </svg>
                </button>
                <input type="number" class="quantity-input" [value]="quantity()" readonly>
                <button 
                  class="quantity-btn" 
                  (click)="incrementQuantity()"
                  [disabled]="quantity() >= availableStock()">
                  <svg viewBox="0 0 24 24" fill="none">
                    <line x1="12" y1="5" x2="12" y2="19" stroke="currentColor" stroke-width="2"/>
                    <line x1="5" y1="12" x2="19" y2="12" stroke="currentColor" stroke-width="2"/>
                  </svg>
                </button>
              </div>
              <span class="stock-info">{{ availableStock() }} disponible(s)</span>
            </div>
          }

          <!-- Actions -->
          <div class="product-actions">
            <button 
              class="btn btn-primary btn-lg add-to-cart-btn" 
              (click)="addToCart()"
              [disabled]="!selectedListing() || addingToCart() || availableStock() === 0">
              @if (addingToCart()) {
                <div class="spinner-small"></div>
                Ajout en cours...
              } @else {
                <svg viewBox="0 0 24 24" fill="none">
                  <path d="M9 2L7 6M17 6L15 2M3 6h18M18.74 6l-1.89 12.36A2 2 0 0 1 14.88 20H9.12a2 2 0 0 1-1.97-1.64L5.26 6" stroke="currentColor" stroke-width="2"/>
                </svg>
                @if (!selectedListing()) {
                  Aucune offre disponible
                } @else if (availableStock() === 0) {
                  Rupture de stock
                } @else {
                  Ajouter au panier
                }
              }
            </button>
          </div>

          <!-- Product Description -->
          <div class="product-description">
            <h3 class="description-title">Description</h3>
            <p class="description-text">{{ product()?.description || 'Aucune description disponible' }}</p>
          </div>

          <!-- Passeport Num√©rique int√©gr√© -->
          <div class="eco-passport-section">
            <div class="eco-passport-header" (click)="togglePassport()">
              <div class="header-left">
                <span class="eco-icon">üå±</span>
                <h3>Passeport Num√©rique Produit</h3>
              </div>
              <svg 
                class="chevron" 
                [class.rotated]="showPassport()"
                viewBox="0 0 24 24" 
                fill="none" 
                stroke="currentColor" 
                stroke-width="2">
                <path d="M6 9l6 6 6-6"/>
              </svg>
            </div>
            
            @if (showPassport()) {
              <div class="passport-content-embedded">
                @if (loadingPassport()) {
                  <div class="loading-passport">
                    <div class="spinner"></div>
                    <p>Chargement des donn√©es environnementales...</p>
                  </div>
                } @else if (passportError()) {
                  <div class="passport-error">
                    <p>{{ passportError() }}</p>
                  </div>
                } @else if (digitalPassport()) {
                  <!-- Tabs compacts -->
                  <div class="passport-tabs-compact">
                    <button 
                      [class.active]="activePassportTab() === 'carbon'"
                      (click)="setPassportTab('carbon')">
                      üå± Carbone
                    </button>
                    <button 
                      [class.active]="activePassportTab() === 'materials'"
                      (click)="setPassportTab('materials')">
                      üì¶ Mat√©riaux
                    </button>
                    <button 
                      [class.active]="activePassportTab() === 'durability'"
                      (click)="setPassportTab('durability')">
                      üîß Durabilit√©
                    </button>
                    <button 
                      [class.active]="activePassportTab() === 'certifications'"
                      (click)="setPassportTab('certifications')">
                      ‚úì Certifications
                    </button>
                    <button 
                      [class.active]="activePassportTab() === 'recycling'"
                      (click)="setPassportTab('recycling')">
                      ‚ôªÔ∏è Recyclage
                    </button>
                  </div>

                  <!-- Contenu du tab actif -->
                  <div class="passport-tab-content">
                    @if (activePassportTab() === 'carbon') {
                      <div class="carbon-compact">
                        <div class="carbon-score">
                          <div class="score-badge" [style.background]="getScoreColor(digitalPassport()!.carbonFootprint.score)">
                            {{ digitalPassport()!.carbonFootprint.score }}
                          </div>
                          <div class="score-info">
                            <strong>{{ digitalPassport()!.carbonFootprint.totalCO2 }} kg CO‚ÇÇ</strong>
                            <span>Empreinte totale</span>
                          </div>
                        </div>
                        <div class="carbon-breakdown-compact">
                          <div class="breakdown-item">
                            <span>üè≠ Fabrication</span>
                            <strong>{{ digitalPassport()!.carbonFootprint.manufacturing }} kg</strong>
                          </div>
                          <div class="breakdown-item">
                            <span>üöö Transport</span>
                            <strong>{{ digitalPassport()!.carbonFootprint.transportation }} kg</strong>
                          </div>
                          <div class="breakdown-item">
                            <span>‚ö° Utilisation</span>
                            <strong>{{ digitalPassport()!.carbonFootprint.usage }} kg</strong>
                          </div>
                          <div class="breakdown-item">
                            <span>üóëÔ∏è Fin de vie</span>
                            <strong>{{ digitalPassport()!.carbonFootprint.endOfLife }} kg</strong>
                          </div>
                        </div>
                      </div>
                    }

                    @if (activePassportTab() === 'materials') {
                      <div class="materials-compact">
                        @for (material of digitalPassport()!.materials; track material.name) {
                          <div class="material-item">
                            <div class="material-info">
                              <strong>{{ material.name }}</strong>
                              <span>{{ material.percentage }}%</span>
                            </div>
                            <div class="material-tags">
                              @if (material.recycled) { <span class="tag">‚ôªÔ∏è Recycl√©</span> }
                              @if (material.renewable) { <span class="tag">üå± Renouvelable</span> }
                              @if (material.recyclable) { <span class="tag">üîÑ Recyclable</span> }
                            </div>
                          </div>
                        }
                        <div class="traceability-info">
                          <p><strong>ÔøΩ Origine :</strong> {{ digitalPassport()!.traceability.originCountry }}</p>
                          <p><strong>üè≠ Fabricant :</strong> {{ digitalPassport()!.traceability.manufacturer }}</p>
                        </div>
                      </div>
                    }

                    @if (activePassportTab() === 'durability') {
                      <div class="durability-compact">
                        <div class="durability-score">
                          <div class="score-badge" [style.background]="getScoreColor(digitalPassport()!.durability.repairabilityIndex)">
                            {{ digitalPassport()!.durability.repairabilityIndex }}
                          </div>
                          <div class="score-info">
                            <strong>{{ digitalPassport()!.durability.repairabilityScore }}/10</strong>
                            <span>Indice de r√©parabilit√©</span>
                          </div>
                        </div>
                        <div class="durability-details">
                          @if (digitalPassport()!.durability.expectedLifespanYears) {
                            <p>‚è±Ô∏è <strong>Dur√©e de vie :</strong> {{ digitalPassport()!.durability.expectedLifespanYears }} ans</p>
                          }
                          <p>üîß <strong>Pi√®ces d√©tach√©es :</strong> {{ digitalPassport()!.durability.sparePartsAvailable ? 'Disponibles' : 'Non disponibles' }}</p>
                          @if (digitalPassport()!.durability.warrantyYears) {
                            <p>üìú <strong>Garantie :</strong> {{ digitalPassport()!.durability.warrantyYears }} an(s)</p>
                          }
                        </div>
                      </div>
                    }

                    @if (activePassportTab() === 'certifications') {
                      <div class="certifications-compact">
                        @if (digitalPassport()!.certifications.length > 0) {
                          @for (cert of digitalPassport()!.certifications; track cert.name) {
                            <div class="cert-item">
                              <div class="cert-icon">‚úì</div>
                              <div class="cert-info">
                                <strong>{{ cert.name }}</strong>
                                <span>{{ cert.issuer }}</span>
                              </div>
                            </div>
                          }
                        } @else {
                          <p class="no-data">Aucune certification disponible</p>
                        }
                      </div>
                    }

                    @if (activePassportTab() === 'recycling') {
                      <div class="recycling-compact">
                        <div class="recycling-stat">
                          <strong>{{ digitalPassport()!.recyclingInfo.recyclablePercentage }}%</strong>
                          <span>du produit recyclable</span>
                        </div>
                        @if (digitalPassport()!.recyclingInfo.instructions) {
                          <p class="instructions">{{ digitalPassport()!.recyclingInfo.instructions }}</p>
                        }
                        @if (digitalPassport()!.recyclingInfo.collectionPoints && digitalPassport()!.recyclingInfo.collectionPoints!.length > 0) {
                          <div class="collection-points-compact">
                            <h4>üìç Points de collecte proches</h4>
                            @for (point of digitalPassport()!.recyclingInfo.collectionPoints; track point.name) {
                              <div class="point-item">
                                <strong>{{ point.name }}</strong>
                                <span>{{ point.distance }}</span>
                              </div>
                            }
                          </div>
                        }
                      </div>
                    }
                  </div>
                }
              </div>
            }
          </div>

          <!-- Product Features -->
          <div class="product-features">
            <button class="feature" (click)="openFeatureSidenav('certified')">
              <svg viewBox="0 0 24 24" fill="none">
                <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14" stroke="currentColor" stroke-width="2"/>
                <polyline points="22 4 12 14.01 9 11.01" stroke="currentColor" stroke-width="2"/>
              </svg>
              <span>Produit certifi√© et test√©</span>
            </button>
            <button class="feature" (click)="openFeatureSidenav('warranty')">
              <svg viewBox="0 0 24 24" fill="none">
                <path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z" stroke="currentColor" stroke-width="2"/>
              </svg>
              <span>Garantie 12 mois</span>
            </button>
            <button class="feature" (click)="openFeatureSidenav('return')">
              <svg viewBox="0 0 24 24" fill="none">
                <path d="M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8" stroke="currentColor" stroke-width="2"/>
                <path d="M3 3v5h5" stroke="currentColor" stroke-width="2"/>
              </svg>
              <span>Retour sous 30 jours</span>
            </button>
            <button class="feature" (click)="openFeatureSidenav('delivery')">
              <svg viewBox="0 0 24 24" fill="none">
                <path d="M20 7h-9M14 3v4M6 21V7a2 2 0 0 1 2-2h2a2 2 0 0 1 2 2v14" stroke="currentColor" stroke-width="2"/>
              </svg>
              <span>Livraison 24h offerte</span>
            </button>
          </div>
        </div>
      </div>
    </div>
  }

  <!-- Modal: Toutes les offres -->
  @if (showAllOffersModal()) {
    <div class="modal-overlay" (click)="closeAllOffersModal()">
      <div class="modal-content" (click)="$event.stopPropagation()">
        <div class="modal-header">
          <h2>Toutes les offres</h2>
          <button class="close-btn" (click)="closeAllOffersModal()">
            <svg viewBox="0 0 24 24" fill="none">
              <path d="M18 6L6 18M6 6l12 12" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
            </svg>
          </button>
        </div>

        <div class="modal-body">
          <div class="offers-table">
            <div class="table-header">
              <div class="col-seller">Vendeur</div>
              <div class="col-condition">√âtat</div>
              <div class="col-price">Prix</div>
              <div class="col-stock">Stock</div>
              <div class="col-action"></div>
            </div>

            @for (listingScore of sortedListings(); track listingScore.listing.id) {
              <div class="table-row" [class.recommended]="listingScore.isRecommended">
                @if (listingScore.isRecommended) {
                  <div class="recommended-badge">
                    <svg viewBox="0 0 24 24" fill="none">
                      <path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z" fill="currentColor"/>
                    </svg>
                    Meilleure offre
                  </div>
                }

                <div class="col-seller">
                  <strong>{{ listingScore.listing.sellerShopName }}</strong>
                  @if (listingScore.listing.conditionNote) {
                    <p class="note">{{ listingScore.listing.conditionNote }}</p>
                  }
                </div>

                <div class="col-condition">
                  <span class="condition-badge" [style.background-color]="getConditionColor(listingScore.listing.conditionNote)">
                    {{ getConditionLabel(listingScore.listing.conditionNote) }}
                  </span>
                </div>

                <div class="col-price">
                  <strong>{{ listingScore.listing.price | number:'1.2-2' }} ‚Ç¨</strong>
                </div>

                <div class="col-stock">
                  @if (listingScore.listing.quantity <= 5) {
                    <span class="stock-warning">{{ listingScore.listing.quantity }} restant(s)</span>
                  } @else {
                    <span class="stock-ok">En stock</span>
                  }
                </div>

                <div class="col-action">
                  <button class="btn-select" (click)="selectListingFromModal(listingScore.listing)">
                    @if (selectedListing()?.id === listingScore.listing.id) {
                      <svg viewBox="0 0 24 24" fill="none">
                        <path d="M20 6L9 17l-5-5" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                      </svg>
                      S√©lectionn√©
                    } @else {
                      S√©lectionner
                    }
                  </button>
                </div>
              </div>
            }
          </div>

          <div class="modal-info">
            <svg viewBox="0 0 24 24" fill="none">
              <circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="2"/>
              <path d="M12 16v-4M12 8h.01" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
            </svg>
            <p>Notre algorithme s√©lectionne la meilleure offre en fonction du rapport qualit√©/prix et de la disponibilit√©</p>
          </div>
        </div>
      </div>
    </div>
  }

  <!-- Feature Sidenav -->
  @if (showFeatureSidenav()) {
    <div class="sidenav-overlay" (click)="closeFeatureSidenav()">
      <div class="sidenav" (click)="$event.stopPropagation()">
        <div class="sidenav-header">
          <h2>{{ getFeatureTitle() }}</h2>
          <button class="close-btn" (click)="closeFeatureSidenav()">
            <svg viewBox="0 0 24 24" fill="none">
              <line x1="18" y1="6" x2="6" y2="18" stroke="currentColor" stroke-width="2"/>
              <line x1="6" y1="6" x2="18" y2="18" stroke="currentColor" stroke-width="2"/>
            </svg>
          </button>
        </div>

        <div class="sidenav-content">
          @switch (currentFeature()) {
            @case ('certified') {
              <div class="feature-detail">
                <div class="feature-icon">
                  <svg viewBox="0 0 24 24" fill="none">
                    <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14" stroke="currentColor" stroke-width="2"/>
                    <polyline points="22 4 12 14.01 9 11.01" stroke="currentColor" stroke-width="2"/>
                  </svg>
                </div>
                <h3>Produit Certifi√© et Test√©</h3>
                <p class="feature-subtitle">Qualit√© garantie par nos experts</p>

                <div class="feature-section">
                  <h4>üîç Contr√¥le Qualit√© Rigoureux</h4>
                  <p>Chaque produit passe par un processus de certification en 52 points avant d'√™tre mis en vente :</p>
                  <ul>
                    <li><strong>Tests fonctionnels :</strong> V√©rification de toutes les fonctionnalit√©s (√©cran, batterie, cam√©ra, connectivit√©)</li>
                    <li><strong>Tests esth√©tiques :</strong> Inspection minutieuse de l'√©tat cosm√©tique</li>
                    <li><strong>Tests de performance :</strong> Benchmarks pour garantir les performances attendues</li>
                    <li><strong>Tests de s√©curit√© :</strong> V√©rification de l'authenticit√© et absence de logiciels malveillants</li>
                  </ul>
                </div>

                <div class="feature-section">
                  <h4>‚úÖ Nos Certifications</h4>
                  <ul>
                    <li><strong>Certification ISO 9001 :</strong> Gestion de la qualit√©</li>
                    <li><strong>Norme europ√©enne :</strong> Conformit√© CE pour tous les appareils √©lectroniques</li>
                    <li><strong>Test batterie :</strong> Capacit√© minimum de 80% garantie</li>
                    <li><strong>Tra√ßabilit√© :</strong> Num√©ro de s√©rie v√©rifi√© et historique document√©</li>
                  </ul>
                </div>

                <div class="feature-section">
                  <h4>üèÜ Engagement Qualit√©</h4>
                  <p>Si votre produit ne correspond pas √† la description ou pr√©sente un d√©faut non mentionn√©, nous nous engageons √† :</p>
                  <ul>
                    <li>Remplacer le produit gratuitement</li>
                    <li>Rembourser int√©gralement sous 48h</li>
                    <li>Prendre en charge les frais de retour</li>
                  </ul>
                </div>
              </div>
            }

            @case ('warranty') {
              <div class="feature-detail">
                <div class="feature-icon">
                  <svg viewBox="0 0 24 24" fill="none">
                    <path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z" stroke="currentColor" stroke-width="2"/>
                  </svg>
                </div>
                <h3>Garantie 12 Mois</h3>
                <p class="feature-subtitle">Votre tranquillit√© d'esprit assur√©e</p>

                <div class="feature-section">
                  <h4>üõ°Ô∏è Couverture Compl√®te</h4>
                  <p>Notre garantie de 12 mois couvre :</p>
                  <ul>
                    <li><strong>Pannes mat√©rielles :</strong> √âcran, batterie, carte m√®re, composants internes</li>
                    <li><strong>Dysfonctionnements logiciels :</strong> Probl√®mes syst√®me, bugs r√©currents</li>
                    <li><strong>D√©fauts de fabrication :</strong> Tout vice cach√© ou d√©faut non apparent √† l'achat</li>
                    <li><strong>Pi√®ces et main d'≈ìuvre :</strong> R√©paration gratuite par nos techniciens certifi√©s</li>
                  </ul>
                </div>

                <div class="feature-section">
                  <h4>‚ö° Activation Imm√©diate</h4>
                  <p>La garantie d√©marre d√®s la r√©ception de votre commande. Aucune d√©marche administrative n√©cessaire !</p>
                </div>

                <div class="feature-section">
                  <h4>üîß Processus de Garantie</h4>
                  <ol>
                    <li><strong>Contactez-nous :</strong> Par t√©l√©phone, email ou chat en ligne</li>
                    <li><strong>Diagnostic :</strong> Notre √©quipe identifie le probl√®me (√† distance si possible)</li>
                    <li><strong>Retour gratuit :</strong> Nous vous envoyons une √©tiquette pr√©pay√©e</li>
                    <li><strong>R√©paration/Remplacement :</strong> Sous 5 √† 7 jours ouvr√©s</li>
                    <li><strong>Renvoi gratuit :</strong> Votre produit r√©par√© vous est retourn√© sans frais</li>
                  </ol>
                </div>

                <div class="feature-section">
                  <h4>üìã Exclusions</h4>
                  <p class="info-text">La garantie ne couvre pas :</p>
                  <ul>
                    <li>Dommages accidentels (chute, liquide, choc)</li>
                    <li>Usure normale (rayures superficielles, d√©coloration)</li>
                    <li>Modifications non autoris√©es</li>
                    <li>Accessoires (c√¢bles, √©couteurs, chargeurs)</li>
                  </ul>
                  <p class="info-text"><em>üí° Astuce : Pour ces risques, d√©couvrez notre assurance "S√©r√©nit√©+" disponible en option.</em></p>
                </div>
              </div>
            }

            @case ('return') {
              <div class="feature-detail">
                <div class="feature-icon">
                  <svg viewBox="0 0 24 24" fill="none">
                    <path d="M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8" stroke="currentColor" stroke-width="2"/>
                    <path d="M3 3v5h5" stroke="currentColor" stroke-width="2"/>
                  </svg>
                </div>
                <h3>Retour Gratuit sous 30 Jours</h3>
                <p class="feature-subtitle">Changez d'avis en toute libert√©</p>

                <div class="feature-section">
                  <h4>üéØ Politique de Retour Flexible</h4>
                  <p>Nous comprenons que l'achat en ligne peut √™tre incertain. C'est pourquoi nous offrons 30 jours complets pour changer d'avis, sans avoir √† vous justifier.</p>
                </div>

                <div class="feature-section">
                  <h4>‚úÖ Conditions du Retour</h4>
                  <ul>
                    <li><strong>D√©lai :</strong> 30 jours calendaires √† partir de la r√©ception</li>
                    <li><strong>√âtat du produit :</strong> Emballage d'origine, accessoires complets, sans rayures ajout√©es</li>
                    <li><strong>Motif :</strong> Aucune justification n√©cessaire ("ne me convient pas" suffit)</li>
                    <li><strong>Frais :</strong> 100% gratuit, y compris les frais de retour</li>
                  </ul>
                </div>

                <div class="feature-section">
                  <h4>üì¶ Comment Retourner Votre Produit</h4>
                  <ol>
                    <li><strong>Demandez un retour :</strong> Depuis votre compte ou par email</li>
                    <li><strong>Recevez l'√©tiquette :</strong> Nous vous envoyons une √©tiquette pr√©pay√©e par email</li>
                    <li><strong>Emballez le produit :</strong> Dans son emballage d'origine avec tous les accessoires</li>
                    <li><strong>D√©posez le colis :</strong> Dans un point relais ou une bo√Æte postale</li>
                    <li><strong>Recevez votre remboursement :</strong> Sous 48h apr√®s r√©ception et contr√¥le</li>
                  </ol>
                </div>

                <div class="feature-section">
                  <h4>üí∞ Remboursement</h4>
                  <ul>
                    <li><strong>Montant :</strong> 100% du prix d'achat (produit + livraison initiale)</li>
                    <li><strong>M√©thode :</strong> M√™me moyen de paiement que l'achat original</li>
                    <li><strong>D√©lai :</strong> 2 √† 5 jours ouvr√©s selon votre banque</li>
                  </ul>
                </div>

                <div class="feature-section">
                  <h4>‚ö†Ô∏è Cas Particuliers</h4>
                  <ul>
                    <li><strong>Produit d√©fectueux :</strong> Retour accept√© m√™me apr√®s 30 jours (garantie)</li>
                    <li><strong>Erreur de notre part :</strong> Retour + frais compens√©s + geste commercial</li>
                    <li><strong>√âchange :</strong> Possible contre un autre produit de valeur √©gale ou sup√©rieure</li>
                  </ul>
                </div>
              </div>
            }

            @case ('delivery') {
              <div class="feature-detail">
                <div class="feature-icon">
                  <svg viewBox="0 0 24 24" fill="none">
                    <path d="M20 7h-9M14 3v4M6 21V7a2 2 0 0 1 2-2h2a2 2 0 0 1 2 2v14" stroke="currentColor" stroke-width="2"/>
                  </svg>
                </div>
                <h3>Livraison 24h Offerte</h3>
                <p class="feature-subtitle">Recevez votre produit en express</p>

                <div class="feature-section">
                  <h4>üöÄ Livraison Express Gratuite</h4>
                  <p>B√©n√©ficiez d'une livraison ultra-rapide sans frais suppl√©mentaires pour tous les produits en stock.</p>
                  <ul>
                    <li><strong>Commande avant 16h :</strong> Livraison le lendemain avant 13h</li>
                    <li><strong>Commande apr√®s 16h :</strong> Livraison sous 48h</li>
                    <li><strong>Weekend et jours f√©ri√©s :</strong> Livraison le jour ouvr√© suivant</li>
                  </ul>
                </div>

                <div class="feature-section">
                  <h4>üìç Options de Livraison</h4>
                  <ul>
                    <li><strong>√Ä domicile :</strong> Directement chez vous ou √† votre bureau
                      <ul class="sub-list">
                        <li>Cr√©neau de livraison de 2h (8h-10h, 10h-12h, 14h-16h, 16h-18h)</li>
                        <li>SMS/Email 1h avant la livraison</li>
                        <li>Remise en main propre avec signature</li>
                      </ul>
                    </li>
                    <li><strong>Point relais :</strong> Plus de 15 000 points en France
                      <ul class="sub-list">
                        <li>Horaires √©tendus (7j/7 pour certains points)</li>
                        <li>Conservation 14 jours</li>
                        <li>SMS d√®s que votre colis est disponible</li>
                      </ul>
                    </li>
                    <li><strong>Consigne automatique :</strong> R√©cup√©ration 24h/24
                      <ul class="sub-list">
                        <li>Code de retrait par SMS</li>
                        <li>Disponible dans les gares et centres commerciaux</li>
                      </ul>
                    </li>
                  </ul>
                </div>

                <div class="feature-section">
                  <h4>üì¶ Suivi en Temps R√©el</h4>
                  <ul>
                    <li><strong>Num√©ro de suivi :</strong> Envoy√© par email d√®s l'exp√©dition</li>
                    <li><strong>Notifications :</strong> SMS √† chaque √©tape (pr√©paration, exp√©dition, en cours de livraison)</li>
                    <li><strong>G√©olocalisation :</strong> Position du livreur en temps r√©el le jour J</li>
                    <li><strong>Contact direct :</strong> Num√©ro du transporteur pour toute question</li>
                  </ul>
                </div>

                <div class="feature-section">
                  <h4>üéÅ Emballage Premium</h4>
                  <p>Tous nos produits sont exp√©di√©s dans un emballage soign√© :</p>
                  <ul>
                    <li>Carton renforc√© et protection bulles</li>
                    <li>Emballage discret (pas de logo visible)</li>
                    <li>Mat√©riaux 100% recyclables</li>
                    <li>Notice de d√©ballage incluse</li>
                  </ul>
                </div>

                <div class="feature-section">
                  <h4>üåç Livraison Internationale</h4>
                  <p><strong>Union Europ√©enne :</strong> 2 √† 4 jours ouvr√©s (frais : 9,90‚Ç¨)</p>
                  <p><strong>Suisse, UK, Norv√®ge :</strong> 3 √† 5 jours ouvr√©s (frais : 14,90‚Ç¨)</p>
                  <p><em>üí° Livraison gratuite d√®s 200‚Ç¨ d'achat pour toute l'Europe !</em></p>
                </div>

                <div class="feature-section">
                  <h4>‚ùì Que Faire en Cas de Probl√®me ?</h4>
                  <ul>
                    <li><strong>Colis perdu :</strong> Renvoi imm√©diat d'un nouveau produit</li>
                    <li><strong>Colis endommag√© :</strong> Refusez le colis et contactez-nous (remplacement gratuit)</li>
                    <li><strong>Retard de livraison :</strong> Bon d'achat de 20‚Ç¨ offert si d√©passement de 48h</li>
                    <li><strong>Absence lors de la livraison :</strong> 2 nouvelles tentatives gratuites</li>
                  </ul>
                </div>
              </div>
            }
          }
        </div>
      </div>
    </div>
  }
</main>

<app-footer></app-footer>
