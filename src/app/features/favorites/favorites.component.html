<app-header></app-header>

<main class="favorites-page">
  <div class="container">
    <div class="page-header">
      <h1 class="page-title">Mes Favoris</h1>
      @if (favorites().length > 0) {
        <p class="page-description">{{ favorites().length }} produit{{ favorites().length > 1 ? 's' : '' }} sauvegardé{{ favorites().length > 1 ? 's' : '' }}</p>
      }
    </div>

    @if (isLoading()) {
      <div class="loading-state">
        <div class="spinner"></div>
        <p>Chargement de vos favoris...</p>
      </div>
    } @else if (favorites().length === 0) {
      <div class="empty-state">
        <svg class="empty-icon" viewBox="0 0 24 24" fill="none">
          <path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z" 
                stroke="currentColor" stroke-width="2"/>
        </svg>
        <h2>Aucun favori pour le moment</h2>
        <p>Ajoutez des produits à vos favoris pour les retrouver facilement</p>
        <a routerLink="/products" class="btn btn-primary btn-lg">
          <svg viewBox="0 0 24 24" fill="none">
            <circle cx="11" cy="11" r="8" stroke="currentColor" stroke-width="2"/>
            <path d="m21 21-4.35-4.35" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
          </svg>
          Découvrir les produits
        </a>
      </div>
    } @else {
      <div class="favorites-grid">
        @for (favorite of favorites(); track favorite.id) {
          <div class="favorite-card">
            <div class="card-image">
              <img src="https://via.placeholder.com/400" 
                   [alt]="favorite.productTitle">
              <button class="remove-btn" (click)="removeFavorite(favorite.productId)" title="Retirer des favoris">
                <svg viewBox="0 0 24 24" fill="none">
                  <path d="M18 6L6 18M6 6l12 12" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                </svg>
              </button>
            </div>

            <div class="card-content">
              <div class="product-info">
                <h3 class="product-title">{{ favorite.productTitle }}</h3>
                <p class="product-brand">{{ favorite.productBrand }}</p>
              </div>

              <div class="card-footer">
                <div class="price">699,00 €</div>
                <div class="card-actions">
                  <button class="btn btn-secondary" [routerLink]="['/products', favorite.productId]">
                    Voir
                  </button>
                  <button class="btn btn-primary" (click)="addToCart(favorite.productId)">
                    <svg viewBox="0 0 24 24" fill="none">
                      <path d="M9 2a1 1 0 0 0-1 1v1H4a1 1 0 0 0-.894 1.447l2.5 5A1 1 0 0 0 6.5 11h11a1 1 0 0 0 .894-.553l2.5-5A1 1 0 0 0 20 4h-4V3a1 1 0 0 0-1-1H9z" 
                            stroke="currentColor" stroke-width="2"/>
                      <path d="M6 13v6a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2v-6" 
                            stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                    </svg>
                    Ajouter
                  </button>
                </div>
              </div>
            </div>
          </div>
        }
      </div>
    }
  </div>
</main>

<app-footer></app-footer>
