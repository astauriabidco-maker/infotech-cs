<app-header></app-header>

<main class="home">
  <!-- Hero Section avec Barre de Recherche (Style Back Market) -->
  <section class="hero-search">
    <div class="container">
      <h1 class="hero-title animate-slide-up">
        Achetez <span class="gradient-text">reconditionné</span>,<br>
        économisez, préservez la planète
      </h1>
      
      <!-- Barre de recherche principale -->
      <div class="search-bar-hero">
        <div class="search-input-wrapper">
          <svg class="search-icon" viewBox="0 0 24 24" fill="none">
            <circle cx="11" cy="11" r="8" stroke="currentColor" stroke-width="2"/>
            <path d="m21 21-4.35-4.35" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
          </svg>
          <input 
            type="text" 
            class="search-input"
            placeholder="Rechercher un produit, une marque..."
            [(ngModel)]="searchQuery"
            (keyup.enter)="searchProducts()"
            (input)="onSearchInput()">
          @if (searchQuery) {
            <button class="clear-search" (click)="clearSearch()">
              <svg viewBox="0 0 24 24" fill="none">
                <path d="M18 6L6 18M6 6l12 12" stroke="currentColor" stroke-width="2"/>
              </svg>
            </button>
          }
        </div>
        <button class="search-button" (click)="searchProducts()">
          Rechercher
        </button>
      </div>

      <!-- Suggestions de recherche -->
      @if (showSuggestions && searchSuggestions.length > 0) {
        <div class="search-suggestions">
          @for (suggestion of searchSuggestions; track suggestion) {
            <button class="suggestion-item" (click)="selectSuggestion(suggestion)">
              <svg viewBox="0 0 24 24" fill="none">
                <circle cx="11" cy="11" r="8" stroke="currentColor" stroke-width="2"/>
                <path d="m21 21-4.35-4.35" stroke="currentColor" stroke-width="2"/>
              </svg>
              {{ suggestion }}
            </button>
          }
        </div>
      }

      <!-- Stats rapides -->
      <div class="hero-stats">
        <div class="stat">
          <div class="stat-value">10K+</div>
          <div class="stat-label">Produits</div>
        </div>
        <div class="stat">
          <div class="stat-value">-70%</div>
          <div class="stat-label">vs Neuf</div>
        </div>
        <div class="stat">
          <div class="stat-value">24h</div>
          <div class="stat-label">Livraison</div>
        </div>
      </div>
    </div>
  </section>

  <!-- Categories Grid (Style Back Market) -->
  <section class="categories-quick-access">
    <div class="container">
      <div class="categories-scroll">
        @for (category of categories; track category.id) {
          <button 
            class="category-chip"
            [class.active]="selectedCategoryId === category.id"
            (click)="filterByCategory(category.id)">
            <span class="category-emoji">{{ getCategoryEmoji(category.name) }}</span>
            <span class="category-label">{{ category.name }}</span>
          </button>
        }
        @if (selectedCategoryId) {
          <button class="category-chip reset" (click)="resetCategory()">
            <svg viewBox="0 0 24 24" fill="none">
              <path d="M18 6L6 18M6 6l12 12" stroke="currentColor" stroke-width="2"/>
            </svg>
            Tout voir
          </button>
        }
      </div>
    </div>
  </section>

  <!-- Featured Products -->
  <section class="featured-section">
    <div class="container">
      <div class="section-header">
        <h2 class="section-title">
          @if (selectedCategoryId) {
            {{ getSelectedCategoryName() }}
          } @else {
            Meilleures offres du moment
          }
        </h2>
        <a routerLink="/products" class="btn btn-ghost">
          Voir tout
          <svg viewBox="0 0 24 24" fill="none">
            <path d="M5 12h14M12 5l7 7-7 7" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
        </a>
      </div>

      @if (isLoading) {
        <div class="loading-state">
          <div class="spinner"></div>
          <p>Chargement des produits...</p>
        </div>
      } @else if (filteredProducts.length === 0) {
        <div class="empty-state">
          <svg viewBox="0 0 24 24" fill="none">
            <circle cx="11" cy="11" r="8" stroke="currentColor" stroke-width="2"/>
            <path d="m21 21-4.35-4.35" stroke="currentColor" stroke-width="2"/>
          </svg>
          <p>Aucun produit trouvé</p>
          <button class="btn btn-primary" (click)="resetCategory()">Voir tous les produits</button>
        </div>
      } @else {
        <div class="products-grid grid grid-4">
          @for (product of filteredProducts.slice(0, 8); track product.id) {
            <app-product-card [product]="product" [price]="699"></app-product-card>
          }
        </div>
      }
    </div>
  </section>

  <!-- Benefits Section -->
  <section class="benefits-section">
    <div class="container">
      <div class="section-header">
        <h2 class="section-title">Pourquoi choisir Infotech ?</h2>
      </div>

      <div class="benefits-grid">
        <div class="benefit-card">
          <div class="benefit-icon">
            <svg viewBox="0 0 24 24" fill="none">
              <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
              <polyline points="22 4 12 14.01 9 11.01" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
          </div>
          <h3 class="benefit-title">Qualité garantie</h3>
          <p class="benefit-description">
            Tous nos produits sont testés et certifiés par nos experts
          </p>
        </div>

        <div class="benefit-card">
          <div class="benefit-icon">
            <svg viewBox="0 0 24 24" fill="none">
              <rect x="3" y="11" width="18" height="11" rx="2" ry="2" stroke="currentColor" stroke-width="2"/>
              <path d="M7 11V7a5 5 0 0 1 10 0v4" stroke="currentColor" stroke-width="2"/>
            </svg>
          </div>
          <h3 class="benefit-title">Paiement sécurisé</h3>
          <p class="benefit-description">
            Vos transactions sont protégées avec un cryptage SSL
          </p>
        </div>

        <div class="benefit-card">
          <div class="benefit-icon">
            <svg viewBox="0 0 24 24" fill="none">
              <path d="M20 7h-9M14 3v4M6 21V7a2 2 0 0 1 2-2h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H8a2 2 0 0 1-2-2z" stroke="currentColor" stroke-width="2"/>
              <path d="M6 13h6" stroke="currentColor" stroke-width="2"/>
            </svg>
          </div>
          <h3 class="benefit-title">Livraison rapide</h3>
          <p class="benefit-description">
            Recevez vos produits en 24h partout en France
          </p>
        </div>

        <div class="benefit-card">
          <div class="benefit-icon">
            <svg viewBox="0 0 24 24" fill="none">
              <path d="M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
              <path d="M3 3v5h5" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
          </div>
          <h3 class="benefit-title">Retour 30 jours</h3>
          <p class="benefit-description">
            Changez d'avis ? Retournez votre produit gratuitement
          </p>
        </div>
      </div>
    </div>
  </section>

  <!-- CTA Section -->
  <section class="cta-section">
    <div class="container">
      <div class="cta-card">
        <h2 class="cta-title">Prêt à faire des économies ?</h2>
        <p class="cta-description">
          Rejoignez des milliers de clients satisfaits et découvrez nos meilleures offres
        </p>
        <a routerLink="/products" class="btn btn-primary btn-lg">
          Commencer à acheter
          <svg viewBox="0 0 24 24" fill="none">
            <path d="M5 12h14M12 5l7 7-7 7" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
        </a>
      </div>
    </div>
  </section>
</main>

<app-footer></app-footer>
