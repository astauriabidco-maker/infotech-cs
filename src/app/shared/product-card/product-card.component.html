<a [routerLink]="['/products', product.id]" class="product-card">
  <!-- Image -->
  <div class="product-image">
    <img [src]="getProductImage()" [alt]="product.title" loading="lazy">
    
    <!-- Favorite Button -->
    @if (authService.isAuthenticated()) {
      <button 
        class="favorite-btn" 
        [class.active]="isFavorite"
        (click)="toggleFavorite($event)"
        [attr.aria-label]="isFavorite ? 'Retirer des favoris' : 'Ajouter aux favoris'">
        <svg viewBox="0 0 24 24" [attr.fill]="isFavorite ? 'currentColor' : 'none'">
          <path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z" 
                stroke="currentColor" 
                stroke-width="2" 
                stroke-linecap="round" 
                stroke-linejoin="round"/>
        </svg>
      </button>
    }

    <!-- Condition Badge -->
    <div class="condition-badge badge" [ngClass]="getConditionBadgeClass()">
      {{ product.condition }}
    </div>
  </div>

  <!-- Content -->
  <div class="product-content">
    <!-- Brand -->
    <p class="product-brand">{{ product.brand }}</p>

    <!-- Title -->
    <h3 class="product-title">{{ product.title }}</h3>

    <!-- Category -->
    <p class="product-category" *ngIf="product.categoryName">
      <svg class="category-icon" viewBox="0 0 24 24" fill="none">
        <path d="M4 4h7v7H4V4zm9 0h7v7h-7V4zm-9 9h7v7H4v-7zm9 0h7v7h-7v-7z" stroke="currentColor" stroke-width="2"/>
      </svg>
      {{ product.categoryName }}
    </p>

    <!-- Price -->
    @if (price) {
      <div class="product-footer">
        <div class="product-price">
          <span class="price-value">{{ price | currency:'EUR':'symbol':'1.2-2':'fr' }}</span>
        </div>
        <button class="btn btn-sm btn-primary view-btn">
          Voir
          <svg viewBox="0 0 24 24" fill="none">
            <path d="M5 12h14M12 5l7 7-7 7" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
        </button>
      </div>
    }
  </div>
</a>
